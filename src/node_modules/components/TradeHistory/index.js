import React, { Component } from 'react'
import FontAwesomeIcon from '@fortawesome/react-fontawesome'
import faCog from '@fortawesome/fontawesome-free-solid/faCog'


// import './index.css';


class TradeHistory extends Component {

  onGetTradeHistory = () => {
    const currencie = this.props.seletedCurrencie;
    const coin = this.props.seletedCoin;
    if ((currencie === '') || (coin === '')) {
      alert('You need to choose a currency and a coin!')
    } else {
      this.props.onGetTradeHistory(currencie, coin)
    }
  }

  render() {
    const { loading_TradeHistory, error_TradeHistory, tradeHistory } = this.props;
    return (
      <div>
        {loading_TradeHistory ?
          <div>
            <button disabled>Get trade history</button>
            &nbsp;
            <FontAwesomeIcon icon={faCog} spin />
          </div>
          : (error_TradeHistory) ?
            <div>
              <button onClick={this.onGetTradeHistory}>Get trade history</button>
              &nbsp;
              Error occurred try again!
            </div>
            :
            <div>
              <button onClick={this.onGetTradeHistory}>Get trade history</button>
            </div>
        }

        <br />

        {tradeHistory.length ?
          <div>
            <table border="1">
              <thead>
                <tr>
                  <th>Date</th>
                  <th>Type</th>
                  <th>Rate</th>
                  <th>Amount</th>
                  <th>Total</th>
                </tr>
              </thead>
              <tbody>
                {
                  tradeHistory.map((item, num) => {
                    return <tr key={num}>
                      <td>{item.date}</td>
                      <td>{item.type}</td>
                      <td>{item.rate}</td>
                      <td>{item.amount}</td>
                      <td>{item.total}</td>
                    </tr>
                  })
                }
              </tbody>
            </table>
            <br />
            Count of trades: {tradeHistory.length}
          </div>
          :
          null
        }
      </div>
    )
  }
}


export default TradeHistory;
